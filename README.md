# Laravel Multi-Tenant SaaS Boilerplate for Order Management

<p align="center">
  <img src="https://img.shields.io/badge/Laravel-11.x-FF2D20.svg?style=flat-square" alt="Laravel 11.x">
  <img src="https://img.shields.io/badge/PHP-8.2-777BB4.svg?style=flat-square" alt="PHP 8.2">
  <img src="https://img.shields.io/badge/Docker-Ready-2496ED.svg?style=flat-square" alt="Docker Ready">
  <img src="https://img.shields.io/badge/Playwright-E2E%20Testing-2EAD33.svg?style=flat-square" alt="Playwright E2E Testing">
  <img src="https://img.shields.io/badge/Scribe-API%20Docs-329696.svg?style=flat-square" alt="Scribe API Docs">
</p>

## ğŸ¯ å°ˆæ¡ˆç›®æ¨™ï¼šä¸€å€‹ç¾ä»£åŒ–çš„å¤šç§Ÿæˆ¶è¨‚å–®ç®¡ç†å¹³å°

é€™æ˜¯ä¸€å€‹åŠŸèƒ½é½Šå…¨ã€é–‹ç®±å³ç”¨çš„ **å¤šç§Ÿæˆ¶ SaaS è¨‚å–®ç®¡ç†å¹³å°æ¨£æ¿ (Boilerplate)**ã€‚å°ˆæ¡ˆæ—¨åœ¨ç‚ºå¸Œæœ›å¿«é€Ÿæ§‹å»ºå’Œéƒ¨ç½²è‡ªå·±è¨‚å–®ç³»çµ±çš„ä¼æ¥­æˆ–é–‹ç™¼è€…ï¼Œæä¾›ä¸€å€‹å …å¯¦ã€å¯æ“´å±•ä¸”å®‰å…¨çš„æŠ€è¡“åŸºç¤ã€‚

ä½¿ç”¨è€…ï¼ˆç§Ÿæˆ¶ï¼‰å¯ä»¥è¨»å†Šè‡ªå·±çš„ç¨ç«‹å¸³æˆ¶ï¼Œåœ¨å®Œå…¨éš”é›¢çš„ç’°å¢ƒä¸­ç®¡ç†è‡ªå·±çš„**ç”¢å“ç›®éŒ„**å’Œ**å®¢æˆ¶è¨‚å–®**ã€‚æœ¬æ¨£æ¿è§£æ±ºäº†å¾é›¶é–‹ç™¼ SaaS å¹³å°ä¸­æœ€è¤‡é›œçš„ç’°ç¯€ï¼ŒåŒ…æ‹¬å¤šç§Ÿæˆ¶æ¶æ§‹ã€ç”¨æˆ¶èªè­‰ã€API è¨­è¨ˆã€è‡ªå‹•åŒ–æ¸¬è©¦å’Œå®¹å™¨åŒ–éƒ¨ç½²ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½ (Core Features)

-   **å¤šç§Ÿæˆ¶æ¶æ§‹ (Multi-Tenancy)**: æ¯å€‹ç§Ÿæˆ¶ï¼ˆå…¬å¸/ç”¨æˆ¶ï¼‰æ“æœ‰ç¨ç«‹çš„ç”¢å“å’Œè¨‚å–®è³‡æ–™ï¼Œé€é `spatie/laravel-multitenancy` å¯¦ç¾åŸŸåç´šåˆ¥çš„ç„¡ç¸«è³‡æ–™éš”é›¢ã€‚
-   **è¨‚å–®èˆ‡ç”¢å“ç®¡ç†**: æä¾›å®Œæ•´çš„ç”¢å“ï¼ˆProductsï¼‰å’Œè¨‚å–®ï¼ˆOrdersï¼‰çš„ CRUDï¼ˆå¢åˆªæ”¹æŸ¥ï¼‰åŠŸèƒ½ï¼Œä½œç‚ºå¹³å°çš„æ ¸å¿ƒæ¥­å‹™ã€‚
-   **API é©…å‹•å¾Œç«¯ (API-Driven)**: ä½¿ç”¨ `Laravel Sanctum` é€²è¡Œèªè­‰ï¼Œæ‰€æœ‰æ¥­å‹™é‚è¼¯éƒ½é€šéä¸€å¥— RESTful API å¯¦ç¾ï¼Œä¾¿æ–¼æœªä¾†èˆ‡å…¶ä»–ç³»çµ±æˆ– App æ•´åˆã€‚
-   **è‡ªå‹•åŒ– API æ–‡ä»¶ (Scribe)**: è‡ªå‹•å¾ç¨‹å¼ç¢¼è¨»è§£ç”Ÿæˆå°ˆæ¥­ã€å¯äº’å‹•çš„ API æ–‡ä»¶ã€‚
-   **ç«¯åˆ°ç«¯è‡ªå‹•åŒ–æ¸¬è©¦ (Playwright)**: åŒ…å«å®Œæ•´çš„ E2E æ¸¬è©¦å¥—ä»¶ï¼Œè¦†è“‹è¨»å†Šã€ç™»å…¥ã€ç”¢å“ç®¡ç†ã€è¨‚å–®å‰µå»ºå’Œç§Ÿæˆ¶è³‡æ–™éš”é›¢ç­‰é—œéµæµç¨‹ã€‚
-   **å®¹å™¨åŒ–é–‹ç™¼ç’°å¢ƒ (Docker)**: æä¾›ä¸€å€‹åŒ…å« Nginx, PHP-FPM, MySQL, å’Œ Redis çš„å®Œæ•´ Docker ç’°å¢ƒï¼Œå¯¦ç¾ä¸€éµå•Ÿå‹•å’Œè·¨å¹³å°ä¸€è‡´æ€§ã€‚
-   **ç¾ä»£åŒ–å‰ç«¯æµç¨‹ (Vite)**: ä½¿ç”¨ Vite é€²è¡Œå‰ç«¯è³‡æºæ‰“åŒ…ï¼Œæä¾›æ¥µé€Ÿçš„é–‹ç™¼é«”é©—ã€‚

## ğŸ› ï¸ æŠ€è¡“æ£§ (Tech Stack)

| é¡åˆ¥        | æŠ€è¡“                                                                                             |
| :---------- | :----------------------------------------------------------------------------------------------- |
| **å¾Œç«¯**    | PHP 8.2, Laravel 11, Spatie Laravel Multitenancy, Laravel Sanctum, Scribe                          |
| **å‰ç«¯**    | Vite, Blade, Tailwind CSS (åŸºç¤), Vanilla JavaScript                                               |
| **è³‡æ–™åº«**  | MySQL 8.0, Redis 7.0                                                                               |
| **ç¶²é ä¼ºæœå™¨** | Nginx                                                                                            |
| **æ¸¬è©¦**    | Playwright (E2E), PHPUnit                                                                        |
| **éƒ¨ç½²**    | Docker, Docker Compose                                                                           |

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹ï¼šå®¹å™¨åŒ–çš„å–®é«”æ‡‰ç”¨

æœ¬å°ˆæ¡ˆæ¡ç”¨ **å®¹å™¨åŒ–çš„å–®é«”æ‡‰ç”¨ (Containerized Monolith)** æ¶æ§‹ã€‚é€™æ˜¯ä¸€ç¨®ç¾ä»£åŒ–ä¸”é«˜æ•ˆçš„è¨­è¨ˆæ¨¡å¼ï¼Œå®ƒå°‡æ ¸å¿ƒçš„ Laravel æ‡‰ç”¨ç¨‹å¼èˆ‡å…¶ä¾è³´çš„åŸºç¤è¨­æ–½æœå‹™ï¼ˆå¦‚è³‡æ–™åº«ã€å¿«å–ï¼‰åˆ†é›¢ï¼Œä¸¦å°‡å®ƒå€‘å„è‡ªå°è£åœ¨ç¨ç«‹çš„ Docker å®¹å™¨ä¸­ã€‚

é€™ç¨®æ¶æ§‹çš„å„ªå‹¢åœ¨æ–¼ï¼š
-   **é–‹ç™¼ç’°å¢ƒä¸€è‡´æ€§**ï¼šæ‰€æœ‰é–‹ç™¼è€…éƒ½ä½¿ç”¨å®Œå…¨ç›¸åŒçš„ç’°å¢ƒï¼Œè§£æ±ºäº†ã€Œåœ¨æˆ‘æ©Ÿå™¨ä¸Šå¯ä»¥è·‘ã€çš„å•é¡Œã€‚
-   **éƒ¨ç½²ç°¡æ½”**ï¼šé€šé `docker-compose` å¯ä»¥ä¸€éµå•Ÿå‹•æ•´å€‹æ‡‰ç”¨æ‰€éœ€çš„æ‰€æœ‰æœå‹™ã€‚
-   **é—œæ³¨é»åˆ†é›¢**ï¼šæ‡‰ç”¨ç¨‹å¼é‚è¼¯ï¼ˆåœ¨ `app` æœå‹™ä¸­ï¼‰èˆ‡è³‡æ–™æŒä¹…åŒ–ï¼ˆåœ¨ `db` å’Œ `cache` æœå‹™ä¸­ï¼‰æ¸…æ™°åˆ†é›¢ã€‚
-   **å¯æ“´å±•æ€§**ï¼šæœªä¾†å¯ä»¥è¼•é¬†åœ°å° `app` æœå‹™é€²è¡Œæ°´å¹³æ“´å±•ï¼Œä»¥æ‡‰å°æ›´é«˜çš„æµé‡ã€‚

```mermaid
graph TD
    subgraph "ç”¨æˆ¶ç«¯ (User Client)"
        U[ğŸ‘¨â€ğŸ’» User's Browser]
    end

    subgraph "ç¶²è·¯/åŸºç¤è¨­æ–½ (Network/Infrastructure)"
        LB(ğŸŒ Internet / Reverse Proxy)
    end

    subgraph "Docker ç’°å¢ƒ (Docker Environment)"
        direction LR
        subgraph "app (Application Service)"
            style app fill:#D6EAF8,stroke:#333,stroke-width:2px
            direction TB
            Nginx[ğŸŒ Nginx Web Server] --> FPM[ğŸ˜ PHP-FPM]
            FPM --> LV["ğŸš€ Laravel Monolith App<br/>(Users, Products, Orders Logic)"]
        end

        subgraph "db (Database Service)"
            DB[(ğŸ—„ï¸ MySQL)]
        end

        subgraph "cache (Cache Service)"
            Redis[(âš¡ Redis)]
        end
    end
    
    U -- "HTTP/S Request (e.g., tenant-a.localhost)" --> LB
    LB -- "Port 8000/8443" --> Nginx

    LV -- "DB Connection" --> DB
    LV -- "Cache/Queue" --> Redis
```

## ğŸŒŸ ç³»çµ±äº®é»èˆ‡æ¶æ§‹è§£æ

é€™å€‹æ¨£æ¿ä¸åƒ…åƒ…æ˜¯æŠ€è¡“çš„å †ç–Šï¼Œæ›´æ˜¯ä¸€å¥—ç¶“éæ·±æ€ç†Ÿæ…®çš„æ¶æ§‹è¨­è¨ˆã€‚ä»¥ä¸‹æ˜¯å¹¾å€‹é—œéµçš„è¨­è¨ˆäº®é»ï¼Œå±•ç¤ºäº†æœ¬å°ˆæ¡ˆå¦‚ä½•è§£æ±º SaaS è¨‚å–®ç®¡ç†å¹³å°ä¸­çš„æ ¸å¿ƒæŒ‘æˆ°ã€‚

### 1. ç„¡ç¸«çš„å¤šç§Ÿæˆ¶è³‡æ–™éš”é›¢

é€é `spatie/laravel-multitenancy`ï¼Œæˆ‘å€‘å¯¦ç¾äº†ç„¡éœ€åœ¨æ¥­å‹™ç¨‹å¼ç¢¼ä¸­ç·¨å¯« `where('tenant_id', ...)` çš„ç„¡ç¸«è³‡æ–™éš”é›¢ã€‚

**é—œéµç¨‹å¼ç¢¼ - `app/Models/Product.php`:**

```php
<?php
namespace App\Models;

use Spatie\Multitenancy\Models\Concerns\ForCurrentTenant;

class Product extends Model
{
    // å¼•å…¥ ForCurrentTenant Trait
    use HasFactory, ForCurrentTenant;
    // ...
}
```

-   **è¨»è§£**ï¼šåƒ…åƒ…é€šéå¼•å…¥ `ForCurrentTenant` é€™å€‹ Traitï¼Œä»»ä½•å° `Product` æ¨¡å‹ï¼ˆä»¥åŠ `Order` å’Œ `User`ï¼‰çš„æŸ¥è©¢éƒ½æœƒè‡ªå‹•æ·»åŠ  `WHERE tenant_id = ?` æ¢ä»¶ã€‚`?` çš„å€¼ç”±æ¡†æ¶æ ¹æ“šç•¶å‰è¨ªå•çš„åŸŸåï¼ˆä¾‹å¦‚ `my-company.localhost`ï¼‰è‡ªå‹•è§£æã€‚é€™å¾æ ¹æœ¬ä¸Šæœçµ•äº†ç§Ÿæˆ¶ A çœ‹åˆ°ç§Ÿæˆ¶ B çš„ç”¢å“å’Œè¨‚å–®çš„é¢¨éšªã€‚

### 2. å¤šç§Ÿæˆ¶è«‹æ±‚ç”Ÿå‘½é€±æœŸ

ä¸‹åœ–å±•ç¤ºäº†ä¸€å€‹ä¾†è‡ªç§Ÿæˆ¶çš„è«‹æ±‚åœ¨ Laravel æ‡‰ç”¨ä¸­çš„è™•ç†æµç¨‹ï¼š

```mermaid
sequenceDiagram
    participant B as Browser
    participant L as Laravel (Kernel.php)
    participant M as Middleware (Spatie)
    participant R as Router
    participant C as Controller
    participant D as DB (with Tenant Scope)

    B->>L: GET http://tenant-a.localhost/products
    L->>M: 1. è™•ç†è«‹æ±‚ï¼Œé€²å…¥ä¸­ä»‹è»Ÿé«”
    M->>M: 2. **DomainTenantFinder** è­˜åˆ¥åŸŸå<br/>ä¸¦å¾ `tenants` è¡¨ä¸­æ‰¾åˆ° Tenant A
    M->>M: 3. **makeCurrent()**: å°‡ Tenant A è¨­ç‚ºç•¶å‰ç§Ÿæˆ¶ä¸Šä¸‹æ–‡
    M->>L: 4. ç¹¼çºŒè™•ç†è«‹æ±‚
    L->>R: 5. è·¯ç”±åˆ†ç™¼åˆ° ProductController@index
    R->>C: 6. åŸ·è¡Œ `index()` æ–¹æ³•
    C->>D: 7. èª¿ç”¨ `Product::all()`
    D->>D: 8. **ForCurrentTenant Trait** è‡ªå‹•<br/>æ·»åŠ  `WHERE tenant_id = 1` æ¢ä»¶
    D-->>C: 9. è¿”å›åƒ…å±¬æ–¼ Tenant A çš„ç”¢å“è³‡æ–™
    C-->>L: 10. è¿”å› JSON éŸ¿æ‡‰
    L-->>B: 11. éŸ¿æ‡‰è¿”å›çµ¦ç€è¦½å™¨
```

### 3. E2E æ¸¬è©¦èˆ‡é é¢ç‰©ä»¶æ¨¡å‹ (POM)

ç‚ºäº†ä¿è­‰æ‡‰ç”¨ç¨‹å¼çš„å“è³ªï¼Œæˆ‘å€‘æ¡ç”¨ Playwright é€²è¡Œ E2E æ¸¬è©¦ï¼Œä¸¦ä½¿ç”¨é é¢ç‰©ä»¶æ¨¡å‹ï¼ˆPOMï¼‰ä¾†çµ„ç¹”æ¸¬è©¦ç¨‹å¼ç¢¼ï¼Œä½¿å…¶æ›´å…·å¯è®€æ€§å’Œå¯ç¶­è­·æ€§ã€‚

**é—œéµç¨‹å¼ç¢¼ - `tests/e2e/specs/auth.spec.js`:**

```javascript
// ...
import LoginPage from '../pages/LoginPage';
import DashboardPage from '../pages/DashboardPage';

test.describe('Authentication', () => {
    let loginPage;
    let dashboardPage;

    test.beforeEach(async ({ page }) => {
        // åœ¨æ¯å€‹æ¸¬è©¦å‰åˆå§‹åŒ–é é¢ç‰©ä»¶
        loginPage = new LoginPage(page);
        dashboardPage = new DashboardPage(page);
        await page.goto('/');
    });

    test('should allow an existing user to log in', async ({ page }) => {
        // ä½¿ç”¨é é¢ç‰©ä»¶å°è£çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ç›´æ¥æ“ä½œé¸æ“‡å™¨
        await loginPage.navigate();
        await loginPage.login('tenant.a@example.com', 'password');

        // æ–·è¨€
        await expect(page).toHaveURL(/dashboard/);
        await expect(dashboardPage.welcomeHeading).toBeVisible();
    });
});
```
-   **è¨»è§£**ï¼šæ¸¬è©¦æ¡ˆä¾‹æœ¬èº«ï¼ˆ`auth.spec.js`ï¼‰ä¸åŒ…å«ä»»ä½• CSS é¸æ“‡å™¨ã€‚å®ƒåªèª¿ç”¨ `LoginPage` ç‰©ä»¶çš„æ–¹æ³•ï¼Œå¦‚ `.login()`ã€‚ç•¶ UI ç™¼ç”Ÿè®ŠåŒ–æ™‚ï¼Œæˆ‘å€‘åªéœ€è¦ä¿®æ”¹å°æ‡‰çš„é é¢ç‰©ä»¶æª”æ¡ˆï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å¤§é‡çš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œæ¥µå¤§æå‡äº†æ¸¬è©¦çš„å¯ç¶­è­·æ€§ã€‚

## ğŸš€ å¿«é€Ÿå•Ÿå‹• (Quick Start)

è«‹ç¢ºä¿æ‚¨çš„ç³»çµ±å·²å®‰è£ `Docker` å’Œ `Docker Compose`ã€‚

1.  **è¤‡è£½å„²å­˜åº«**
    ```bash
    git clone https://github.com/BpsEason/laravel_saas_boilerplate.git
    cd laravel_saas_boilerplate
    ```

2.  **è¨­å®šç’°å¢ƒè®Šæ•¸**
    ```bash
    cp .env.example .env
    ```

3.  **å•Ÿå‹• Docker æœå‹™**
    ```bash
    docker-compose up -d --build
    ```
    *ç¬¬ä¸€æ¬¡å•Ÿå‹•æœƒéœ€è¦ä¸€äº›æ™‚é–“ä¾†æ§‹å»º Docker é¡åƒã€‚*

4.  **å®‰è£ä¾è³´ä¸¦åˆå§‹åŒ–è³‡æ–™åº«**
    ```bash
    docker-compose exec app composer install
    docker-compose exec app npm install
    docker-compose exec app npm run build
    docker-compose exec app php artisan migrate --seed
    ```
    *æ­¤æ­¥é©Ÿæœƒå®‰è£æ‰€æœ‰å¾Œç«¯å’Œå‰ç«¯ä¾è³´ï¼Œä¸¦å¡«å……ç¯„ä¾‹è³‡æ–™ã€‚*

5.  **è¨­å®šæœ¬åœ° Hosts æª”æ¡ˆ** (å¯é¸ï¼Œä½†å¼·çƒˆå»ºè­°)
    ç‚ºäº†è®“å¤šç§Ÿæˆ¶åŸŸåæ­£å¸¸é‹ä½œï¼Œè«‹å°‡ä»¥ä¸‹å…§å®¹æ·»åŠ åˆ°æ‚¨çš„ `hosts` æª”æ¡ˆä¸­ï¼š
    -   macOS/Linux: `/etc/hosts`
    -   Windows: `C:\Windows\System32\drivers\etc\hosts`

    ```
    127.0.0.1 tenant-a.localhost
    127.0.0.1 tenant-b.localhost
    ```

6.  **è¨ªå•æ‡‰ç”¨ç¨‹å¼ï¼ğŸ‰**
    -   ğŸŒ **ä¸»è¦å…¥å£**: [http://localhost:8000](http://localhost:8000)
    -   ğŸ‘¤ **ç§Ÿæˆ¶ A**: [http://tenant-a.localhost:8000/login](http://tenant-a.localhost:8000/login)
    -   ğŸ‘¤ **ç§Ÿæˆ¶ B**: [http://tenant-b.localhost:8000/login](http://tenant-b.localhost:8000/login)
    -   ğŸ“„ **API æ–‡ä»¶ (Scribe)**: [http://localhost:8000/api/docs](http://localhost:8000/api/docs)

### ç¯„ä¾‹ä½¿ç”¨è€…å¸³è™Ÿ

è³‡æ–™åº«å¡«å……ï¼ˆseederï¼‰å·²ç‚ºæ‚¨å‰µå»ºäº†å…©å€‹ç§Ÿæˆ¶çš„ç¯„ä¾‹ä½¿ç”¨è€…ï¼š

-   **ç§Ÿæˆ¶ A (Tenant A)**:
    -   Email: `tenant.a@example.com`
    -   Password: `password`
-   **ç§Ÿæˆ¶ B (Tenant B)**:
    -   Email: `tenant.b@example.com`
    -   Password: `password`

## âœ… é‹è¡Œæ¸¬è©¦ (Running Tests)

æœ¬å°ˆæ¡ˆä½¿ç”¨ Playwright é€²è¡Œç«¯åˆ°ç«¯æ¸¬è©¦ï¼Œä»¥ç¢ºä¿æ‡‰ç”¨ç¨‹å¼çš„ç©©å®šæ€§ã€‚

åŸ·è¡Œä»¥ä¸‹å‘½ä»¤ä¾†é‹è¡Œæ‰€æœ‰ E2E æ¸¬è©¦ï¼š
```bash
docker-compose exec app npm run test:e2e
```
è‹¥è¦ä½¿ç”¨ UI æ¨¡å¼é€²è¡Œèª¿è©¦ï¼š
```bash
docker-compose exec app npm run test:e2e:ui
```

## â“ å¸¸è¦‹å•é¡Œèˆ‡è¨­è¨ˆæ±ºç­– (FAQ & Design Decisions)

é€™éƒ¨åˆ†å°‡å›ç­”ä¸€äº›é—œæ–¼æ­¤å°ˆæ¡ˆæ¶æ§‹å’ŒæŠ€è¡“é¸å‹çš„å¸¸è¦‹å•é¡Œï¼Œå¹«åŠ©æ‚¨æ›´æ·±å…¥åœ°ç†è§£å…¶è¨­è¨ˆç†å¿µã€‚

**Q1: é€™å€‹å°ˆæ¡ˆçš„ç›®æ¨™æ˜¯ä»€éº¼ï¼Ÿå®ƒè§£æ±ºäº†ä»€éº¼æ ¸å¿ƒå•é¡Œï¼Ÿ**

> **A:** é€™æ˜¯åŸºæ–¼ Laravel çš„ **å¤šç§Ÿæˆ¶ SaaS è¨‚å–®ç®¡ç†å¹³å°æ¨£æ¿**ã€‚
>
> å®ƒçš„æ ¸å¿ƒç›®æ¨™æ˜¯è§£æ±ºå¾é›¶é–‹å§‹æ§‹å»º SaaS å¹³å°æ™‚ï¼Œ**é‡è¤‡ä¸”è€—æ™‚çš„åŸºç¤æ¶æ§‹é…ç½®å•é¡Œ**ã€‚å®ƒæä¾›äº†ä¸€å€‹é–‹ç®±å³ç”¨çš„è§£æ±ºæ–¹æ¡ˆï¼Œæ•´åˆäº†å¤šç§Ÿæˆ¶æ¶æ§‹ã€API èªè­‰ã€è‡ªå‹•åŒ–æ¸¬è©¦ç­‰è¤‡é›œä½†å¿…è¦çš„æŠ€è¡“æ£§ï¼Œè®“é–‹ç™¼è€…å¯ä»¥å¾ç¬¬ä¸€å¤©èµ·å°±å°ˆæ³¨æ–¼é–‹ç™¼ç¨ç‰¹çš„æ¥­å‹™åŠŸèƒ½ï¼Œè€Œä¸æ˜¯åŸºç¤å»ºè¨­ã€‚

**Q2: ç‚ºä»€éº¼é¸æ“‡å¤šç§Ÿæˆ¶æ¶æ§‹ï¼Ÿå®ƒæ˜¯å¦‚ä½•å¯¦ç¾è³‡æ–™éš”é›¢çš„ï¼Ÿ**

> **A:** å¤šç§Ÿæˆ¶æ¶æ§‹å…è¨±å–®ä¸€æ‡‰ç”¨ç¨‹å¼å¯¦ä¾‹æœå‹™å¤šå€‹å®¢æˆ¶ï¼ˆç§Ÿæˆ¶ï¼‰ï¼ŒåŒæ™‚ä¿æŒæ¯å€‹å®¢æˆ¶çš„è³‡æ–™ç¨ç«‹èˆ‡å®‰å…¨ã€‚é€™èƒ½æ¥µå¤§**é™ä½ä¼ºæœå™¨æˆæœ¬å’Œç¶­è­·è¤‡é›œåº¦**ã€‚
>
> åœ¨æŠ€è¡“ä¸Šï¼Œæœ¬å°ˆæ¡ˆä½¿ç”¨ `spatie/laravel-multitenancy` å¥—ä»¶å¯¦ç¾ã€‚å…¶é—œéµæ©Ÿåˆ¶æ˜¯ï¼š
> 1.  **ç§Ÿæˆ¶è­˜åˆ¥**: é€é **DomainTenantFinder** ä¸­ä»‹è»Ÿé«”ï¼Œæ ¹æ“šè«‹æ±‚çš„åŸŸåï¼ˆå¦‚ `my-company.localhost`ï¼‰è‡ªå‹•è­˜åˆ¥ç•¶å‰æ˜¯å“ªå€‹ç§Ÿæˆ¶ã€‚
> 2.  **è‡ªå‹•åŒ–ä½œç”¨åŸŸ**: åœ¨æ ¸å¿ƒæ¨¡å‹ï¼ˆå¦‚ `Product`, `Order`ï¼‰ä¸­å¼•å…¥ `ForCurrentTenant` Traitã€‚é€™å€‹ Trait æœƒè‡ªå‹•ç‚ºæ‰€æœ‰è³‡æ–™åº«æŸ¥è©¢åŠ ä¸Š `WHERE tenant_id = ?` çš„æ¢ä»¶ï¼Œå¾è€Œå¯¦ç¾äº†ç„¡ç¸«ä¸”å®‰å…¨çš„è³‡æ–™éš”é›¢ï¼Œç„¡éœ€åœ¨æ¥­å‹™ç¨‹å¼ç¢¼ä¸­æ‰‹å‹•æ·»åŠ éæ¿¾ã€‚æ‚¨å¯ä»¥åœ¨ä¸Šæ–¹çš„ã€Œå¤šç§Ÿæˆ¶è«‹æ±‚ç”Ÿå‘½é€±æœŸã€åœ–ä¸­çœ‹åˆ°æ­¤æµç¨‹çš„è©³ç´°æ¼”ç¤ºã€‚

**Q3: ç‚ºä»€éº¼é¸æ“‡ Laravel Sanctum é€²è¡Œ API èªè­‰ï¼Ÿ**

> **A:** æˆ‘é¸æ“‡ Laravel Sanctum æ˜¯å› ç‚ºå®ƒå°ˆç‚ºç¾ä»£æ‡‰ç”¨ï¼ˆå¦‚ SPAã€è¡Œå‹•æ‡‰ç”¨ï¼‰è¨­è¨ˆï¼Œæä¾›äº†è¼•é‡ç´šä¸”å®‰å…¨çš„ **API Token èªè­‰æ©Ÿåˆ¶**ã€‚
>
> ç›¸è¼ƒæ–¼å‚³çµ±çš„ Session èªè­‰ï¼ŒSanctum çš„ `Bearer Token` æ¨¡å¼æ›´é©åˆç„¡ç‹€æ…‹ (Stateless) çš„ RESTful APIï¼Œä½¿å¾—å‰å¾Œç«¯åˆ†é›¢çš„æ¶æ§‹æ›´ç‚ºç°¡æ½”ã€‚åŒæ™‚ï¼Œå®ƒä¹Ÿå…¼é¡§äº†å° SPA æ‡‰ç”¨çš„ç‹€æ…‹ä¿æŒå’Œ CSRF ä¿è­·ï¼Œæ˜¯ç¾ä»£ Laravel API é–‹ç™¼çš„æœ€ä½³å¯¦è¸ä¹‹ä¸€ã€‚

**Q4: Docker åœ¨é€™å€‹å°ˆæ¡ˆä¸­æ‰®æ¼”äº†ä»€éº¼è§’è‰²ï¼Ÿ**

> **A:** Docker åœ¨æ­¤å°ˆæ¡ˆä¸­æ˜¯ **é–‹ç™¼èˆ‡éƒ¨ç½²ç’°å¢ƒçš„åŸºçŸ³**ã€‚å®ƒé€šé `docker-compose` å°‡æ‡‰ç”¨ç¨‹å¼åŠå…¶æ‰€æœ‰ä¾è³´ï¼ˆPHP-FPMã€Nginxã€MySQLã€Redisï¼‰å°è£åœ¨ç¨ç«‹çš„å®¹å™¨ä¸­ã€‚
>
> é€™å¸¶ä¾†äº†ä¸‰å¤§å¥½è™•ï¼š
> 1.  **ç’°å¢ƒä¸€è‡´æ€§**: è§£æ±ºäº†ã€Œåœ¨æˆ‘æ©Ÿå™¨ä¸Šå¯ä»¥è·‘ã€çš„å…¸å‹å•é¡Œï¼Œç¢ºä¿æ‰€æœ‰é–‹ç™¼è€…å’Œä¼ºæœå™¨éƒ½ä½¿ç”¨å®Œå…¨ç›¸åŒçš„ç’°å¢ƒã€‚
> 2.  **å¿«é€Ÿå•Ÿå‹•**: æ–°æˆå“¡åªéœ€ä¸€è¡Œ `docker-compose up` å‘½ä»¤å³å¯å•Ÿå‹•å®Œæ•´çš„é–‹ç™¼ç’°å¢ƒã€‚
> 3.  **å¯ç§»æ¤æ€§**: æ•´å€‹æ‡‰ç”¨å¯ä»¥è¼•é¬†åœ°åœ¨ä»»ä½•æ”¯æŒ Docker çš„å¹³å°ä¸Šé‹è¡Œã€‚

**Q5: ç‚ºä»€éº¼è¦ä½¿ç”¨ Playwright é€²è¡Œç«¯åˆ°ç«¯ (E2E) æ¸¬è©¦ï¼Ÿ**

> **A:** E2E æ¸¬è©¦æ˜¯ç¢ºä¿æ‡‰ç”¨ç¨‹å¼å“è³ªçš„æœ€å¾Œä¸€é“é˜²ç·šã€‚æˆ‘é¸æ“‡ Playwright æ˜¯ç‚ºäº†**æ¨¡æ“¬çœŸå¯¦ç”¨æˆ¶çš„å®Œæ•´æ“ä½œæµç¨‹**ï¼Œä»¥é©—è­‰æ•´å€‹ç³»çµ±ï¼ˆå¾å‰ç«¯ UI åˆ°å¾Œç«¯ API å†åˆ°è³‡æ–™åº«ï¼‰æ˜¯å¦èƒ½å”åŒæ­£å¸¸å·¥ä½œã€‚
>
> å°æ–¼é€™å€‹ SaaS å¹³å°ï¼ŒE2E æ¸¬è©¦çš„é—œéµä½œç”¨æ˜¯ï¼š
> -   **é©—è­‰è³‡æ–™éš”é›¢**: è‡ªå‹•åŒ–æ¸¬è©¦ç¢ºä¿ç§Ÿæˆ¶ A çµ•å°ç„¡æ³•è¨ªå•åˆ°ç§Ÿæˆ¶ B çš„è³‡æ–™ã€‚
> -   **ä¿éšœæ ¸å¿ƒæµç¨‹**: ç¢ºä¿è¨»å†Šã€ç™»å…¥ã€è¨‚å–®å‰µå»ºç­‰é—œéµåŠŸèƒ½åœ¨ç¨‹å¼ç¢¼è®Šæ›´å¾Œä¾ç„¶ç©©å®šã€‚
> -   **æå‡å¯ç¶­è­·æ€§**: æˆ‘æ¡ç”¨äº† **é é¢ç‰©ä»¶æ¨¡å‹ (Page Object Model, POM)** ä¾†çµ„ç¹”æ¸¬è©¦ç¨‹å¼ç¢¼ï¼Œå°‡ UI å…ƒç´ é¸æ“‡å™¨èˆ‡æ¸¬è©¦é‚è¼¯åˆ†é›¢ï¼Œä½¿å¾—ç•¶ UI è®Šå‹•æ™‚ï¼Œç¶­è­·æˆæœ¬é™åˆ°æœ€ä½ã€‚

**Q6: é€™å€‹æ¨£æ¿åœ¨éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒæ™‚ï¼Œé‚„éœ€è¦è€ƒæ…®å“ªäº›å„ªåŒ–ï¼Ÿ**

> **A:** é›–ç„¶é€™å€‹æ¨£æ¿ç‚ºç”Ÿç”¢ç’°å¢ƒæ‰“ä¸‹äº†å …å¯¦åŸºç¤ï¼Œä½†åœ¨æ­£å¼ä¸Šç·šå‰ï¼Œä»æœ‰å¹¾å€‹é—œéµçš„å„ªåŒ–é»éœ€è¦è€ƒæ…®ï¼š
> 1.  **å®‰å…¨æ€§å¼·åŒ–**: é…ç½®çœŸå¯¦çš„ HTTPS æ†‘è­‰ (å¦‚ Let's Encrypt)ï¼Œè¨­å®šæ›´åš´æ ¼çš„ API é€Ÿç‡é™åˆ¶ï¼Œä¸¦è€ƒæ…®å¼•å…¥åŸºæ–¼è§’è‰²çš„æ¬Šé™æ§åˆ¶ (RBAC)ã€‚
> 2.  **æ€§èƒ½å„ªåŒ–**: å•Ÿç”¨ Laravel çš„é…ç½®å’Œè·¯ç”±å¿«å– (`config:cache`, `route:cache`)ï¼Œä¸¦å°è³‡æ–™åº«æŸ¥è©¢é€²è¡Œå„ªåŒ–ã€‚å°æ–¼é«˜æµé‡æ‡‰ç”¨ï¼Œå¯ä»¥è€ƒæ…®ä½¿ç”¨ Laravel Octaneã€‚
> 3.  **ç›£æ§èˆ‡æ—¥èªŒ**: æ•´åˆ Sentry æˆ– Laravel Telescope ç­‰å·¥å…·é€²è¡Œæ‡‰ç”¨æ€§èƒ½ç›£æ§å’ŒéŒ¯èª¤è¿½è¹¤ã€‚
> 4.  **ç•°æ­¥ä»»å‹™**: ç¢ºä¿ Supervisor æˆ–é¡ä¼¼çš„é€²ç¨‹ç®¡ç†å™¨æ­£åœ¨é‹è¡Œï¼Œä»¥è™•ç† Redis éšŠåˆ—ä¸­çš„ç•°æ­¥ä»»å‹™ï¼ˆå¦‚éƒµä»¶ç™¼é€ã€å ±è¡¨ç”Ÿæˆç­‰ï¼‰ã€‚
> 5.  **å‚™ä»½ç­–ç•¥**: åˆ¶å®šä¸¦å¯¦æ–½å®šæœŸçš„è³‡æ–™åº«è‡ªå‹•å‚™ä»½å’Œæ¢å¾©è¨ˆåŠƒã€‚

## ğŸ“œ æˆæ¬Š (License)

æ­¤å°ˆæ¡ˆæ¡ç”¨ [MIT License](LICENSE.md) æˆæ¬Šã€‚
